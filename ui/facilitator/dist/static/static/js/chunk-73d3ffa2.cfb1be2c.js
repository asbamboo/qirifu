(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73d3ffa2"],{4565:function(e,t,a){"use strict";var s=a("c6df"),r=a.n(s);r.a},"79fa":function(e,t,a){"use strict";var s=a("e655"),r=a.n(s);r.a},c6df:function(e,t,a){},d5c2:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register-container"},[a("el-form",{ref:"registerForm",staticClass:"register-form",attrs:{model:e.register_form,rules:e.rules,autocomplete:"on","label-position":"left"}},[a("div",{staticClass:"title-container"},[a("h3",{staticClass:"title"},[e._v("商户账号注册")])]),e._v(" "),a("el-form-item",{attrs:{prop:"email"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),a("el-input",{ref:"email",attrs:{placeholder:"请输入Email",name:"email",type:"text",tabindex:"1",autocomplete:"on"},model:{value:e.register_form.email,callback:function(t){e.$set(e.register_form,"email",t)},expression:"register_form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),a("el-input",{ref:"password",attrs:{type:"password",placeholder:"请输入密码",name:"password",tabindex:"2",autocomplete:"on"},model:{value:e.register_form.password,callback:function(t){e.$set(e.register_form,"password",t)},expression:"register_form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"confirm_password"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),a("el-input",{ref:"confirm-password",attrs:{type:"password",placeholder:"请再次输入密码",name:"confirm_password",tabindex:"3",autocomplete:"on"},model:{value:e.register_form.confirm_password,callback:function(t){e.$set(e.register_form,"confirm_password",t)},expression:"register_form.confirm_password"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"captcha"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"people"}})],1),e._v(" "),a("el-input",{attrs:{type:"text",placeholder:"请输入验证码",name:"captcha",tabindex:"4",autocomplete:"off"},model:{value:e.register_form.captcha,callback:function(t){e.$set(e.register_form,"captcha",t)},expression:"register_form.captcha"}}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"验证码将发送到您输入的email，请注意查收。",placement:"top-end"}},["no"==e.captcha_sended?a("span",{staticClass:"captcha-send",on:{click:function(t){return e.doSendCaptcha()}}},[a("svg-icon",{attrs:{"icon-class":"guide"}}),e._v("\n          点此发送验证码\n        ")],1):e._e(),e._v(" "),"yes"==e.captcha_sended?a("span",{staticClass:"captcha-sended"},[a("svg-icon",{attrs:{"icon-class":"lock"}}),e._v("\n          "+e._s(e.captcha_resend_limit)+"秒\n        ")],1):e._e()])],1),e._v(" "),a("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.ajax,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.doRegister()}}},[e._v("注册")]),e._v(" "),a("router-link",{staticClass:"tips",attrs:{to:"/login"}},[e._v("\n      已经有账号了，点此登录！\n    ")])],1)],1)},r=[],i=a("b775"),n=a("4328"),o=a.n(n);function c(e){return Object(i["a"])({url:"/register/send-captcha",method:"post",data:o.a.stringify(e)})}function l(e){return Object(i["a"])({url:"/register/action",method:"post",data:o.a.stringify(e)})}var p={name:"Register",data:function(){var e=this,t=function(t,a,s){a!=e.password?s(new Error("两次密码输入不一致")):s()};return{register_form:{email:"",password:"",confirm_password:"",captcha:""},rules:{email:[{required:!0,message:"请输入有效的Email",trigger:"blur",type:"email"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirm_password:[{required:!0,message:"请再次输入密码",trigger:"blur"},{required:!0,trigger:"blur",validateConfirmPassword:t}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]},captcha_sended:"no",captcha_resend_limit:120,captcha_timer:void 0,ajax:!1}},methods:{doSendCaptcha:function(){var e=this;console.log("/hosts/www/public/"),this.captcha_sended="yes",c(this.register_form).then(function(t){console.log(t),e.$message({message:t.message,showClose:!0}),e.captcha_resend_limit=120,e.captcha_timer=setInterval(e.changeCaptchaResendLimit,1e3)}).catch(function(t){e.captcha_sended="no",console.log(t)})},changeCaptchaResendLimit:function(){this.captcha_resend_limit=this.captcha_resend_limit-1,this.captcha_resend_limit<0&&(this.captcha_sended="no",this.captcha_resend_limit=120,clearInterval(this.captcha_timer))},doRegister:function(){var e=this;this.$refs.registerForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.ajax=!0,l(e.register_form).then(function(t){e.$alert("点击确定，前往登录页面！","注册成功",{callback:function(t){e.$router.push("/login")}}),e.ajax=!1}).catch(function(t){e.ajax=!1})})}},beforeDestroy:function(){clearInterval(this.captcha_timer)}},m=p,d=(a("4565"),a("79fa"),a("2877")),f=Object(d["a"])(m,s,r,!1,null,"4641506a",null);t["default"]=f.exports},e655:function(e,t,a){}}]);