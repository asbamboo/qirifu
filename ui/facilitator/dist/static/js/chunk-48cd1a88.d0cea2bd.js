(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48cd1a88"],{8492:function(t,a,e){"use strict";e.d(a,"d",function(){return s}),e.d(a,"c",function(){return n}),e.d(a,"a",function(){return l}),e.d(a,"e",function(){return i}),e.d(a,"b",function(){return r});var o=e("b775");function s(t){return Object(o["a"])({url:"/merchant/lists",method:"get",params:t})}function n(t){return Object(o["a"])({url:"/merchant/detail",method:"get",params:{seq:t}})}function l(t){return Object(o["a"])({url:"/merchant/channel",method:"get",params:{seq:t}})}function i(){return Object(o["a"])({url:"/merchant/channel-search-options",method:"get"})}function r(t){return Object(o["a"])({url:"/merchant/channel-lists",method:"get",params:t})}},dd1e:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("router-link",{attrs:{to:"/merchant/detail/"+t.merchant.seq}},[e("el-alert",{attrs:{type:"success",closable:!1}},[e("h4",[t._v("商户简称: "+t._s(t.merchant.name))])])],1),t._v(" "),e("el-collapse",{model:{value:t.active_collapse,callback:function(a){t.active_collapse=a},expression:"active_collapse"}},[e("el-collapse-item",{attrs:{name:"collapse-item-alipay"}},[e("template",{slot:"title"},[e("div",[e("h4",[t._v("支付宝支付")])])]),t._v(" "),t.show_alipay_dialog?e("div",[e("alipay-dialog"),t._v(" "),e("el-divider")],1):t._e(),t._v(" "),e("el-timeline",t._l(t.alipay_timelines,function(a,o){return e("el-timeline-item",{key:o,attrs:{timestamp:a.time,placement:"top",type:"primary"}},[e("h4",[t._v(t._s(a.status))]),t._v(" "),e("p",[t._v(t._s(a.desc))])])}),1)],2),t._v(" "),e("el-collapse-item",{attrs:{name:"collapse-item-wxpay"}},[e("template",{slot:"title"},[e("h4",[t._v("微信支付")])]),t._v(" "),t.show_wxpay_dialog?e("div",[e("wxpay-dialog"),t._v(" "),e("el-divider")],1):t._e(),t._v(" "),e("el-timeline",t._l(t.wxpay_timelines,function(a,o){return e("el-timeline-item",{key:o,attrs:{timestamp:a.time,placement:"top",type:"primary"}},[e("h4",[t._v(t._s(a.status))]),t._v(" "),e("p",[t._v(t._s(a.desc))])])}),1)],2)],1)],1)},s=[],n=e("8492"),l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.doSendToAlipay()}}},[t._v("将资料提交到支付宝")]),t._v(" "),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.openDialog()}}},[t._v("提交新的操作记录")]),t._v(" "),e("el-dialog",{attrs:{title:"提交新的操作记录",visible:t.open_dialog},on:{"update:visible":function(a){t.open_dialog=a}}},[e("el-form",{attrs:{model:t.post_form}},[e("el-form-item",{attrs:{label:"状态"}},[e("el-select",{model:{value:t.post_form.status,callback:function(a){t.$set(t.post_form,"status",a)},expression:"post_form.status"}},t._l(t.available_status,function(a){return"no-apply"!=a.status&&"apply-ing"!=a.status?e("el-option",{attrs:{label:a.label,value:a.status}}):t._e()}),1)],1),t._v(" "),e("el-form-item",{attrs:{label:"说明"}},[e("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.post_form.desc,callback:function(a){t.$set(t.post_form,"desc",a)},expression:"post_form.desc"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"是否通知商户联系人"}},[e("el-checkbox-group",{model:{value:t.post_form.notifys,callback:function(a){t.$set(t.post_form,"notifys",a)},expression:"post_form.notifys"}},[e("el-checkbox",{attrs:{label:"email"}},[t._v("邮件")]),t._v(" "),e("el-checkbox",{attrs:{label:"sms"}},[t._v("短信")])],1)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.open_dialog=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary",disabled:t.ajax},on:{click:function(a){return t.doSubmit()}}},[t._v("\n        确 定\n      ")])],1)],1)],1)},i=[],r=e("b775"),c=e("4328"),p=e.n(c);function u(){return Object(r["a"])({url:"/merchant/alipay/channel-available-status",method:"get"})}function m(t){return Object(r["a"])({url:"/merchant/alipay/channel-create-history",method:"post",data:p.a.stringify(t)})}function _(){return Object(r["a"])({url:"/merchant/wxpay/channel-available-status",method:"get"})}function d(t){return Object(r["a"])({url:"/merchant/wxpay/channel-create-history",method:"post",data:p.a.stringify(t)})}var f={status:void 0,seller_id:void 0,desc:void 0,notifys:["email"]},h={name:"MerchantChannelAlipayDialog",data:function(){return{open_dialog:!1,post_form:Object.assign({},f),ajax:!1,available_status:[]}},created:function(){this.getAvailableStatus()},methods:{getAvailableStatus:function(){var t=this;u().then(function(a){t.available_status=a.data.items}).catch(function(t){console.log(t)})},doSendToAlipay:function(){window.open("https://open.alipay.com","_blank"),this.open_dialog=!0,this.post_form=Object.assign({},f),this.post_form.status="send-alipay"},openDialog:function(){this.post_form=Object.assign({},f),this.open_dialog=!0},doSubmit:function(){var t=this;if(1!=this.ajax){this.ajax=!0;var a=this.post_form;a.seq=this.$route.params.seq,m(a).then(function(a){t.open_dialog=!1,t.$message({message:a.message,showClose:!0}),t.$parent.$parent.$parent.alipay_timelines=a.data.history;var e=a.data.is_ok,o=a.data.is_apply;t.$parent.$parent.$parent.show_alipay_dialog=!e&&o,t.ajax=!1}).catch(function(a){console.log(a),t.ajax=!1})}}}},v=h,b=e("2877"),y=Object(b["a"])(v,l,i,!1,null,null,null),g=y.exports,x=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.doSendToWxpay()}}},[t._v("将资料提交到微信支付")]),t._v(" "),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.openDialog()}}},[t._v("提交新的操作记录")]),t._v(" "),e("el-dialog",{attrs:{title:"提交新的操作记录",visible:t.open_dialog},on:{"update:visible":function(a){t.open_dialog=a}}},[e("el-form",{attrs:{model:t.post_form}},[e("el-form-item",{attrs:{label:"状态"}},[e("el-select",{model:{value:t.post_form.status,callback:function(a){t.$set(t.post_form,"status",a)},expression:"post_form.status"}},t._l(t.available_status,function(a){return"no-apply"!=a.status&&"apply-ing"!=a.status?e("el-option",{attrs:{label:a.label,value:a.status}}):t._e()}),1)],1),t._v(" "),"ok"==t.post_form.status?e("el-form-item",{attrs:{label:"微信支付商户号"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.post_form.sub_mch_id,callback:function(a){t.$set(t.post_form,"sub_mch_id",a)},expression:"post_form.sub_mch_id"}})],1):t._e(),t._v(" "),e("el-form-item",{attrs:{label:"说明"}},[e("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.post_form.desc,callback:function(a){t.$set(t.post_form,"desc",a)},expression:"post_form.desc"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"是否通知商户联系人"}},[e("el-checkbox-group",{model:{value:t.post_form.notifys,callback:function(a){t.$set(t.post_form,"notifys",a)},expression:"post_form.notifys"}},[e("el-checkbox",{attrs:{label:"email"}},[t._v("邮件")]),t._v(" "),e("el-checkbox",{attrs:{label:"sms"}},[t._v("短信")])],1)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.open_dialog=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary",disabled:t.ajax},on:{click:function(a){return t.doSubmit()}}},[t._v("\n        确 定\n      ")])],1)],1)],1)},w=[],k={status:null,sub_mch_id:void 0,desc:void 0,notifys:["email"]},j={name:"MerchantChannelWxpayDialog",data:function(){return{open_dialog:!1,post_form:Object.assign({},k),ajax:!1,available_status:[]}},created:function(){this.getAvailableStatus()},methods:{getAvailableStatus:function(){var t=this;_().then(function(a){t.available_status=a.data.items}).catch(function(t){console.log(t)})},doSendToWxpay:function(){window.open("https://pay.weixin.qq.com","_blank"),this.open_dialog=!0,this.post_form=Object.assign({},k),this.post_form.status="send-wxpay"},openDialog:function(){this.post_form=Object.assign({},k),this.open_dialog=!0},doSubmit:function(){var t=this;if(1!=this.ajax){this.ajax=!0;var a=this.post_form;a.seq=this.$route.params.seq,d(a).then(function(a){t.open_dialog=!1,t.$message({message:a.message,showClose:!0});var e=t.$parent.$parent.$parent,o=a.data.is_ok,s=a.data.is_apply;e.wxpay_timelines=a.data.history,e.show_wxpay_dialog=!o&&s,t.ajax=!1}).catch(function(a){console.log(a),t.ajax=!1})}}}},$=j,O=Object(b["a"])($,x,w,!1,null,null,null),S=O.exports,q=[{}],D={name:""},A=q,C={name:"MerchantChannel",components:{AlipayDialog:g,WxpayDialog:S},data:function(){return{show_alipay_dialog:!1,alipay_timelines:Object.assign({},q),show_wxpay_dialog:!1,wxpay_timelines:Object.assign({},A),merchant:D,active_collapse:["collapse-item-alipay","collapse-item-wxpay"]}},created:function(){this.fetchData(this.$route.params.seq)},methods:{fetchData:function(t){var a=this;Object(n["a"])(t).then(function(t){a.alipay_timelines=t.data.channel.alipay.history;var e=t.data.channel.alipay.is_ok,o=t.data.channel.alipay.is_apply;a.show_alipay_dialog=!e&&o,a.wxpay_timelines=t.data.channel.wxpay.history;var s=t.data.channel.wxpay.is_ok,n=t.data.channel.wxpay.is_apply;a.show_wxpay_dialog=!s&&n,a.merchant=t.data.merchant}).catch(function(t){console.log(t)})}}},T=C,W=Object(b["a"])(T,o,s,!1,null,null,null);a["default"]=W.exports}}]);