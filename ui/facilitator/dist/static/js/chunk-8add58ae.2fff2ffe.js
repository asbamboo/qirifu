(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8add58ae"],{"05ff":function(t,e,a){"use strict";var i=a("3a7a"),n=a.n(i);n.a},"3a7a":function(t,e,a){},8492:function(t,e,a){"use strict";a.d(e,"c",function(){return n}),a.d(e,"b",function(){return o}),a.d(e,"a",function(){return s});var i=a("b775");function n(t){return Object(i["a"])({url:"/merchant/lists",method:"get",params:t})}function o(t){return Object(i["a"])({url:"/merchant/detail",method:"get",params:{seq:t}})}function s(t){return Object(i["a"])({url:"/merchant/channel",method:"get",params:{seq:t}})}},dc65:function(t,e,a){},dd1e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-alert",{attrs:{type:"success",closable:!1}},[t._v("\n    商户简称: "+t._s(t.merchant.name)+"\n  ")]),t._v(" "),a("el-collapse",{model:{value:t.active_collapse,callback:function(e){t.active_collapse=e},expression:"active_collapse"}},[a("el-collapse-item",{attrs:{name:"collapse-item-alipay"}},[a("template",{slot:"title"},[a("div",[a("h4",[t._v("支付宝支付")])])]),t._v(" "),t.show_alipay_dialog?a("div",[a("alipay-dialog"),t._v(" "),a("el-divider")],1):t._e(),t._v(" "),a("el-timeline",t._l(t.alipay_timelines,function(e,i){return a("el-timeline-item",{key:i,attrs:{timestamp:e.time,type:"primary"}},[t._v(t._s(e.status))])}),1)],2),t._v(" "),a("el-collapse-item",{attrs:{name:"collapse-item-wxpay"}},[a("template",{slot:"title"},[a("h4",[t._v("微信支付")])]),t._v(" "),t.show_wxpay_dialog?a("div",[a("wxpay-dialog"),t._v(" "),a("el-divider")],1):t._e(),t._v(" "),a("el-timeline",t._l(t.wxpay_timelines,function(e,i){return a("el-timeline-item",{key:i,attrs:{timestamp:e.time,type:"primary"}},[t._v(t._s(e.status))])}),1)],2)],1)],1)},n=[],o=a("8492"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.doSendToAlipay()}}},[t._v("将资料提交到支付宝")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.openDialog()}}},[t._v("提交新的操作记录")]),t._v(" "),a("el-dialog",{attrs:{title:"提交新的操作记录",visible:t.open_dialog},on:{"update:visible":function(e){t.open_dialog=e}}},[a("el-form",{attrs:{model:t.post_form}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{on:{change:t.doChangeStatus},model:{value:t.post_form.status,callback:function(e){t.$set(t.post_form,"status",e)},expression:"post_form.status"}},t._l(t.available_status,function(e){return"no-apply"!=e.status&&"apply-ing"!=e.status?a("el-option",{attrs:{label:e.label,value:e.status}}):t._e()}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"说明"}},[a("Tinymce",{ref:"editor",attrs:{height:150},model:{value:t.post_form.desc,callback:function(e){t.$set(t.post_form,"desc",e)},expression:"post_form.desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知商户联系人"}},[a("el-checkbox-group",{model:{value:t.post_form.notifys,callback:function(e){t.$set(t.post_form,"notifys",e)},expression:"post_form.notifys"}},[a("el-checkbox",{attrs:{label:"email"}},[t._v("邮件")]),t._v(" "),a("el-checkbox",{attrs:{label:"sms"}},[t._v("短信")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.open_dialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.ajax},on:{click:function(e){return t.doSubmit()}}},[t._v("\n        确 定\n      ")])],1)],1)],1)},l=[],r=a("b775"),c=a("4328"),u=a.n(c);function d(){return Object(r["a"])({url:"/merchant/alipay/channel-available-status",method:"get"})}function p(t){return Object(r["a"])({url:"/merchant/alipay/channel-create-history",method:"post",data:u.a.stringify(t)})}function m(){return Object(r["a"])({url:"/merchant/wxpay/channel-available-status",method:"get"})}function h(t){return Object(r["a"])({url:"/merchant/wxpay/channel-create-history",method:"post",data:u.a.stringify(t)})}var f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[a("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}})])},_=[],b=(a("ac6a"),a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-container"},[a("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("\n    upload\n  ")]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("\n        Click upload\n      ")])],1),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("\n      Cancel\n    ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("\n      Confirm\n    ")])],1)],1)}),v=[],y=(a("456d"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var a=e.uid,i=Object.keys(this.listObj),n=0,o=i.length;n<o;n++)if(this.listObj[i[n]].uid===a)return this.listObj[i[n]].url=t.files.file,void(this.listObj[i[n]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,a=Object.keys(this.listObj),i=0,n=a.length;i<n;i++)if(this.listObj[a[i]].uid===e)return void delete this.listObj[a[i]]},beforeUpload:function(t){var e=this,a=window.URL||window.webkitURL,i=t.uid;return this.listObj[i]={},new Promise(function(n,o){var s=new Image;s.src=a.createObjectURL(t),s.onload=function(){e.listObj[i]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},n(!0)})}}}),g=y,w=(a("fd60"),a("2877")),k=Object(w["a"])(g,b,v,!1,null,"3fefeeec",null),x=k.exports,j=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],C=j,O=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],S=O,$=(a("ac4d"),a("8a81"),[]);function T(){return window.tinymce}var I=function(t,e){var a=document.getElementById(t),i=e||function(){};if(!a){var n=document.createElement("script");n.src=t,n.id=t,document.body.appendChild(n),$.push(i);var o="onload"in n?s:l;o(n)}function s(e){e.onload=function(){this.onerror=this.onload=null;for(var t=0,a=$;t<a.length;t++){var i=a[t];i(null,e)}$=null},e.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+t),e)}}function l(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e=!0,a=!1,i=void 0;try{for(var n,o=$[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;s(null,t)}}catch(l){a=!0,i=l}finally{try{e||null==o.return||o.return()}finally{if(a)throw i}}$=null}}}a&&i&&(T()?i(null,a):$.push(i))},q=I,A="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",D={name:"Tinymce",components:{editorImage:x},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;q(A,function(e){e?t.$message.error(e.message):t.initTinymce()})},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["en"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:S,menubar:this.menubar,plugins:C,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(a){e.value&&a.setContent(e.value),e.hasInit=!0,a.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",a.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))})}}},E=D,L=(a("05ff"),Object(w["a"])(E,f,_,!1,null,"413cda48",null)),z=L.exports,U={status:void 0,seller_id:void 0,desc:void 0,notifys:["email"]},V={name:"MerchantChannelAlipayDialog",data:function(){return{open_dialog:!1,post_form:Object.assign({},U),ajax:!1,available_status:[]}},components:{Tinymce:z},created:function(){this.getAvailableStatus()},methods:{getAvailableStatus:function(){var t=this;d().then(function(e){t.available_status=e.data.items}).catch(function(t){console.log(t)})},doSendToAlipay:function(){window.open("https://open.alipay.com","_blank"),this.open_dialog=!0,this.post_form=Object.assign({},U),this.post_form.status="send-alipay"},openDialog:function(){this.post_form=Object.assign({},U),this.open_dialog=!0},doChangeStatus:function(t){for(var e in this.available_status)this.available_status[e].status==t&&(this.post_form.desc=this.available_status[e].desc,this.$refs.editor.setContent(this.post_form.desc))},doSubmit:function(){var t=this;if(1!=this.ajax){this.ajax=!0;var e=this.post_form;e.seq=this.$route.params.seq,p(e).then(function(e){t.open_dialog=!1,t.$message({message:e.message,showClose:!0}),t.$parent.$parent.$parent.alipay_timelines=e.data.history;var a=e.data.is_ok,i=e.data.is_apply;t.$parent.$parent.$parent.show_alipay_dialog=!a&&i,t.ajax=!1}).catch(function(e){console.log(e),t.ajax=!1})}}}},W=V,M=Object(w["a"])(W,s,l,!1,null,null,null),R=M.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.doSendToWxpay()}}},[t._v("将资料提交到微信支付")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.openDialog()}}},[t._v("提交新的操作记录")]),t._v(" "),a("el-dialog",{attrs:{title:"提交新的操作记录",visible:t.open_dialog},on:{"update:visible":function(e){t.open_dialog=e}}},[a("el-form",{attrs:{model:t.post_form}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{on:{change:t.doChangeStatus},model:{value:t.post_form.status,callback:function(e){t.$set(t.post_form,"status",e)},expression:"post_form.status"}},t._l(t.available_status,function(e){return"no-apply"!=e.status&&"apply-ing"!=e.status?a("el-option",{attrs:{label:e.label,value:e.status}}):t._e()}),1)],1),t._v(" "),"ok"==t.post_form.status?a("el-form-item",{attrs:{label:"微信支付商户号"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.post_form.sub_mch_id,callback:function(e){t.$set(t.post_form,"sub_mch_id",e)},expression:"post_form.sub_mch_id"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"说明"}},[a("Tinymce",{ref:"editor",attrs:{height:150},model:{value:t.post_form.desc,callback:function(e){t.$set(t.post_form,"desc",e)},expression:"post_form.desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知商户联系人"}},[a("el-checkbox-group",{model:{value:t.post_form.notifys,callback:function(e){t.$set(t.post_form,"notifys",e)},expression:"post_form.notifys"}},[a("el-checkbox",{attrs:{label:"email"}},[t._v("邮件")]),t._v(" "),a("el-checkbox",{attrs:{label:"sms"}},[t._v("短信")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.open_dialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.ajax},on:{click:function(e){return t.doSubmit()}}},[t._v("\n        确 定\n      ")])],1)],1)],1)},N=[],B={status:null,sub_mch_id:void 0,desc:void 0,notifys:["email"]},K={name:"MerchantChannelWxpayDialog",components:{Tinymce:z},data:function(){return{open_dialog:!1,post_form:Object.assign({},B),ajax:!1,available_status:[]}},created:function(){this.getAvailableStatus()},methods:{getAvailableStatus:function(){var t=this;m().then(function(e){t.available_status=e.data.items}).catch(function(t){console.log(t)})},doSendToWxpay:function(){window.open("https://pay.weixin.qq.com","_blank"),this.open_dialog=!0,this.post_form=Object.assign({},B),this.post_form.status="send-wxpay"},openDialog:function(){this.post_form=Object.assign({},B),this.open_dialog=!0},doChangeStatus:function(t){for(var e in this.available_status)this.available_status[e].status==t&&(this.post_form.desc=this.available_status[e].desc,this.$refs.editor.setContent(this.post_form.desc))},doSubmit:function(){var t=this;if(1!=this.ajax){this.ajax=!0;var e=this.post_form;e.seq=this.$route.params.seq,h(e).then(function(e){t.open_dialog=!1,t.$message({message:e.message,showClose:!0});var a=t.$parent.$parent.$parent,i=e.data.is_ok,n=e.data.is_apply;a.wxpay_timelines=e.data.history,a.show_wxpay_dialog=!i&&n,t.ajax=!1}).catch(function(e){console.log(e),t.ajax=!1})}}}},J=K,P=Object(w["a"])(J,F,N,!1,null,null,null),X=P.exports,G=[{}],H={name:""},Q=G,Y={name:"MerchantChannel",components:{AlipayDialog:R,WxpayDialog:X},data:function(){return{show_alipay_dialog:!1,alipay_timelines:Object.assign({},G),show_wxpay_dialog:!1,wxpay_timelines:Object.assign({},Q),merchant:H,active_collapse:["collapse-item-alipay","collapse-item-wxpay"]}},created:function(){this.fetchData(this.$route.params.seq)},methods:{fetchData:function(t){var e=this;Object(o["a"])(t).then(function(t){e.alipay_timelines=t.data.channel.alipay.history;var a=t.data.channel.alipay.is_ok,i=t.data.channel.alipay.is_apply;e.show_alipay_dialog=!a&&i,e.wxpay_timelines=t.data.channel.wxpay.history;var n=t.data.channel.wxpay.is_ok,o=t.data.channel.wxpay.is_apply;e.show_wxpay_dialog=!n&&o,e.merchant=t.data.merchant}).catch(function(t){console.log(t)})}}},Z=Y,tt=Object(w["a"])(Z,i,n,!1,null,null,null);e["default"]=tt.exports},fd60:function(t,e,a){"use strict";var i=a("dc65"),n=a.n(i);n.a}}]);