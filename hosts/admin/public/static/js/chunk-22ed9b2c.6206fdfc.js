(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22ed9b2c"],{8492:function(t,e,a){"use strict";a.d(e,"c",function(){return s}),a.d(e,"b",function(){return l}),a.d(e,"a",function(){return n});var o=a("b775");function s(t){return Object(o["a"])({url:"/merchant/lists",method:"get",params:t})}function l(t){return Object(o["a"])({url:"/merchant/detail",method:"get",params:{seq:t}})}function n(t){return Object(o["a"])({url:"/merchant/channel",method:"get",params:{seq:t}})}},dd1e:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-alert",{attrs:{type:"success",closable:!1}},[t._v("\n    商户简称: "+t._s(t.merchant.name)+"\n  ")]),t._v(" "),a("el-collapse",{model:{value:t.active_collapse,callback:function(e){t.active_collapse=e},expression:"active_collapse"}},[a("el-collapse-item",{attrs:{name:"collapse-item-alipay"}},[a("template",{slot:"title"},[a("div",[a("h4",[t._v("支付宝支付")])])]),t._v(" "),0==t.alipay_is_ok?a("div",[a("alipay-dialog"),t._v(" "),a("el-divider")],1):t._e(),t._v(" "),a("el-timeline",t._l(t.alipay_timelines,function(e,o){return a("el-timeline-item",{key:o,attrs:{timestamp:e.time,type:"primary"}},[t._v(t._s(e.status))])}),1)],2),t._v(" "),a("el-collapse-item",{attrs:{name:"collapse-item-wxpay"}},[a("template",{slot:"title"},[a("h4",[t._v("微信支付")])]),t._v(" "),0==t.wxpay_is_ok?a("div",[a("wxpay-dialog"),t._v(" "),a("el-divider")],1):t._e(),t._v(" "),a("el-timeline",t._l(t.wxpay_timelines,function(e,o){return a("el-timeline-item",{key:o,attrs:{timestamp:e.time,type:"primary"}},[t._v(t._s(e.status))])}),1)],2)],1)],1)},s=[],l=a("8492"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.doSendToAlipay()}}},[t._v("将资料提交到支付宝")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.openDialog()}}},[t._v("提交新的操作记录")]),t._v(" "),a("el-dialog",{attrs:{title:"提交新的操作记录",visible:t.open_dialog},on:{"update:visible":function(e){t.open_dialog=e}}},[a("el-form",{attrs:{model:t.post_form}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{model:{value:t.post_form.status,callback:function(e){t.$set(t.post_form,"status",e)},expression:"post_form.status"}},t._l(t.available_status,function(e){return"no-apply"!=e.status&&"apply-ing"!=e.status?a("el-option",{attrs:{label:e.label,value:e.status}}):t._e()}),1)],1),t._v(" "),"ok"==t.post_form.status?a("el-form-item",{attrs:{label:"支付宝卖家ID"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.post_form.seller_id,callback:function(e){t.$set(t.post_form,"seller_id",e)},expression:"post_form.seller_id"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"说明"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.post_form.desc,callback:function(e){t.$set(t.post_form,"desc",e)},expression:"post_form.desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知商户联系人"}},[a("el-checkbox-group",{model:{value:t.post_form.notifys,callback:function(e){t.$set(t.post_form,"notifys",e)},expression:"post_form.notifys"}},[a("el-checkbox",{attrs:{label:"email"}},[t._v("邮件")]),t._v(" "),a("el-checkbox",{attrs:{label:"sms"}},[t._v("短信")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.open_dialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.ajax},on:{click:function(e){return t.doSubmit()}}},[t._v("\n        确 定\n      ")])],1)],1)],1)},i=[],r=a("b775");function c(){return Object(r["a"])({url:"/merchant/channel-alipay-available-status",method:"get"})}function u(t){var e=a("4328");return Object(r["a"])({url:"/merchant/channel-alipay-create-history",method:"post",data:e.stringify(t)})}function p(){return Object(r["a"])({url:"/merchant/channel-wxpay-available-status",method:"get"})}function m(t){var e=a("4328");return Object(r["a"])({url:"/merchant/channel-wxpay-create-history",method:"post",data:e.stringify(t)})}var _={status:null,seller_id:void 0,desc:void 0,notifys:["email"]},f={name:"MerchantChannelAlipayDialog",data:function(){return{open_dialog:!1,post_form:Object.assign({},_),ajax:!1,available_status:[]}},created:function(){this.getAvailableStatus()},methods:{getAvailableStatus:function(){var t=this;c().then(function(e){t.available_status=e.data.items}).catch(function(t){console.log(t)})},doSendToAlipay:function(){window.open("https://open.alipay.com","_blank"),this.open_dialog=!0,this.post_form=Object.assign({},_),this.post_form.status="send-alipay"},openDialog:function(){this.post_form=Object.assign({},_),this.open_dialog=!0},doSubmit:function(){var t=this;1!=this.ajax&&(this.ajax=!0,u(this.post_form).then(function(e){t.open_dialog=!1,t.$message({message:e.message,showClose:!0}),t.ajax=!1}).catch(function(e){console.log(e),t.ajax=!1}))}}},d=f,v=a("2877"),h=Object(v["a"])(d,n,i,!1,null,null,null),b=h.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.doSendToWxpay()}}},[t._v("将资料提交到微信支付")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.openDialog()}}},[t._v("提交新的操作记录")]),t._v(" "),a("el-dialog",{attrs:{title:"提交新的操作记录",visible:t.open_dialog},on:{"update:visible":function(e){t.open_dialog=e}}},[a("el-form",{attrs:{model:t.post_form}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{model:{value:t.post_form.status,callback:function(e){t.$set(t.post_form,"status",e)},expression:"post_form.status"}},t._l(t.available_status,function(e){return"no-apply"!=e.status&&"apply-ing"!=e.status?a("el-option",{attrs:{label:e.label,value:e.status}}):t._e()}),1)],1),t._v(" "),"ok"==t.post_form.status?a("el-form-item",{attrs:{label:"微信支付商户号"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.post_form.sub_mch_id,callback:function(e){t.$set(t.post_form,"sub_mch_id",e)},expression:"post_form.sub_mch_id"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"说明"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.post_form.desc,callback:function(e){t.$set(t.post_form,"desc",e)},expression:"post_form.desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知商户联系人"}},[a("el-checkbox-group",{model:{value:t.post_form.notifys,callback:function(e){t.$set(t.post_form,"notifys",e)},expression:"post_form.notifys"}},[a("el-checkbox",{attrs:{label:"email"}},[t._v("邮件")]),t._v(" "),a("el-checkbox",{attrs:{label:"sms"}},[t._v("短信")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.open_dialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.ajax},on:{click:function(e){return t.doSubmit()}}},[t._v("\n        确 定\n      ")])],1)],1)],1)},g=[],x={status:null,sub_mch_id:void 0,desc:void 0,notifys:["email"]},k={name:"MerchantChannelWxpayDialog",data:function(){return{open_dialog:!1,post_form:Object.assign({},x),ajax:!1,available_status:[]}},created:function(){this.getAvailableStatus()},methods:{getAvailableStatus:function(){var t=this;p().then(function(e){t.available_status=e.data.items}).catch(function(t){console.log(t)})},doSendToWxpay:function(){window.open("https://pay.weixin.qq.com","_blank"),this.open_dialog=!0,this.post_form=Object.assign({},x),this.post_form.status="send-wxpay"},openDialog:function(){this.post_form=Object.assign({},x),this.open_dialog=!0},doSubmit:function(){var t=this;1!=this.ajax&&(this.ajax=!0,m(this.post_form).then(function(e){t.open_dialog=!1,t.$message({message:e.message,showClose:!0}),t.ajax=!1}).catch(function(e){console.log(e),t.ajax=!1}))}}},j=k,w=Object(v["a"])(j,y,g,!1,null,null,null),O=w.exports,$=[{}],S={name:""},D=$,A={name:"MerchantChannel",components:{AlipayDialog:b,WxpayDialog:O},data:function(){return{alipay_is_ok:!1,alipay_timelines:Object.assign({},$),wxpay_is_ok:!1,wxpay_timelines:Object.assign({},D),merchant:S,active_collapse:["collapse-item-alipay","collapse-item-wxpay"]}},created:function(){this.fetchData(this.$route.params.seq)},methods:{fetchData:function(t){var e=this;Object(l["a"])(t).then(function(t){e.alipay_is_ok=t.data.channel.alipay.is_ok,e.alipay_timelines=t.data.channel.alipay.history,e.wxpay_is_ok=t.data.channel.wxpay.is_ok,e.wxpay_timelines=t.data.channel.wxpay.history,e.merchant=t.data.merchant}).catch(function(t){console.log(t)})}}},C=A,q=Object(v["a"])(C,o,s,!1,null,null,null);e["default"]=q.exports}}]);